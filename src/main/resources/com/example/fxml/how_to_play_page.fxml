<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.canvas.Canvas?>

<StackPane xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" 
           fx:controller="com.example.controllers.HowToPlayController"
           prefWidth="800.0" prefHeight="600.0">

   <!-- Background with grass image - same as home page -->
   <StackPane>
      <ImageView fitWidth="800" fitHeight="600" preserveRatio="false">
         <image>
            <Image url="@../assets/home_page_grass.png" />
         </image>
      </ImageView>
   </StackPane>

   <!-- Content structure - now in a BorderPane within StackPane -->
   <BorderPane>
      <!-- Header bar -->
      <top>
         <StackPane fx:id="headerBar" onMousePressed="#onHeaderBarPressed" onMouseDragged="#onHeaderBarDragged">
            <Rectangle width="800" height="60" 
                     style="-fx-fill: #5d7542; -fx-arc-width: 0; -fx-arc-height: 0;">
               <effect>
                  <DropShadow color="#00000080" height="10" radius="4.5" width="10" />
               </effect>
            </Rectangle>

            <Text fill="#eaeaea" text="How To Play" 
                 style="-fx-font-family: 'Segoe UI'; -fx-font-size: 32px; -fx-font-weight: bold;">
               <effect>
                  <DropShadow color="#00000080" height="5" radius="2" width="5" />
               </effect>
            </Text>
         </StackPane>
      </top>

      <!-- Main content -->
      <center>
         <ScrollPane fitToWidth="true" style="-fx-background-color: transparent; -fx-background: transparent;">
            <style>
               .scroll-pane > .viewport {
                  -fx-background-color: transparent;
               }
               .scroll-bar:vertical .track{
                  -fx-background-color: #5d4228;
                  -fx-border-color: #6b4c2e;
                  -fx-background-radius: 0;
               }
               .scroll-bar:vertical .thumb{
                  -fx-background-color: #8a673c;
                  -fx-background-radius: 0;
               }
               .scroll-bar .increment-button,
               .scroll-bar .decrement-button{
                  -fx-background-color: #6b4c2e;
                  -fx-border-color: #8a673c;
               }
               .scroll-bar:vertical .increment-arrow,
               .scroll-bar:vertical .decrement-arrow{
                  -fx-background-color: #e8d9b5;
               }
               .corner {
                  -fx-background-color: #6b4c2e;
               }
            </style>
            <content>
               <VBox spacing="16" maxWidth="700" style="-fx-padding: 20 20 20 20; -fx-background-color: transparent;">
                  <!-- Game Objective Section -->
                  <VBox spacing="8" style="-fx-padding: 15; -fx-background-radius: 10;">
                     <Label text="GAME OBJECTIVE" textFill="#f4e3a1" style="-fx-font-family: 'Segoe UI'; -fx-font-weight: bold; -fx-font-size: 18px;" />
                     <Text fill="#e0d7c6" style="-fx-font-family: 'Segoe UI'; -fx-font-size: 14px;" 
                           text="Defend your territory by strategically placing towers to prevent enemies from reaching your base. Defeat waves of incoming enemies by using different tower types, each with unique abilities and strengths." 
                           wrappingWidth="640" />
                  </VBox>
                  
                  <!-- Basic Controls Section -->
                  <VBox spacing="8" style="-fx-padding: 15; -fx-background-radius: 10;">
                     <Label text="BASIC CONTROLS" textFill="#f4e3a1" style="-fx-font-family: 'Segoe UI'; -fx-font-weight: bold; -fx-font-size: 18px;" />
                     <Text fill="#e0d7c6" style="-fx-font-family: 'Segoe UI'; -fx-font-size: 14px;" 
                           text="• Left-Click: Select towers, place towers, upgrade towers&#10;• Right-Click: Cancel selection&#10;• Mouse Over: View tower range and information" 
                           wrappingWidth="640" />
                  </VBox>
                  
                  <!-- Game Resources Section -->
                  <VBox spacing="8" style="-fx-padding: 15; -fx-background-radius: 10;">
                     <Label text="GAME RESOURCES" textFill="#f4e3a1" style="-fx-font-family: 'Segoe UI'; -fx-font-weight: bold; -fx-font-size: 18px;" />
                     <Text fill="#e0d7c6" style="-fx-font-family: 'Segoe UI'; -fx-font-size: 14px;"
                           text="• Gold: Used to build and upgrade towers. Earned by defeating enemies.&#10;• Lives: You start with a limited number of lives. Each enemy that reaches your base takes away one life. When all lives are lost, the game ends." 
                           wrappingWidth="640" />
                  </VBox>
                  
                  <!-- Towers Section -->
                  <VBox spacing="8" style="-fx-padding: 15; -fx-background-radius: 10;">
                     <Label text="TOWERS" textFill="#f4e3a1" style="-fx-font-family: 'Segoe UI'; -fx-font-weight: bold; -fx-font-size: 18px;" />
                     <Text fill="#e0d7c6" style="-fx-font-family: 'Segoe UI'; -fx-font-size: 14px;"
                           text="• Archer Tower: Basic tower with balanced attack speed and damage.&#10;• Cannon Tower: Deals area damage but has a slower attack speed.&#10;• Ice Tower: Slows down enemies within its range.&#10;• Magic Tower: High damage against single targets, ignores armor.&#10;&#10;Each tower can be upgraded to increase its damage, range, or special abilities." 
                           wrappingWidth="640" />
                  </VBox>
                  
                  <!-- Enemies Section -->
                  <VBox spacing="8" style="-fx-padding: 15; -fx-background-radius: 10;">
                     <Label text="ENEMIES" textFill="#f4e3a1" style="-fx-font-family: 'Segoe UI'; -fx-font-weight: bold; -fx-font-size: 18px;" />
                     <Text fill="#e0d7c6" style="-fx-font-family: 'Segoe UI'; -fx-font-size: 14px;"
                           text="• Goblins: Fast but weak enemies.&#10;• Orcs: Medium health and speed.&#10;• Trolls: Slow but high health.&#10;• Boss Enemies: Appear at the end of certain waves, extremely tough.&#10;&#10;Some enemies may have special abilities like armor or resistance to certain tower types." 
                           wrappingWidth="640" />
                  </VBox>
                  
                  <!-- Wave System Section -->
                  <VBox spacing="8" style="-fx-padding: 15; -fx-background-radius: 10;">
                     <Label text="WAVE SYSTEM" textFill="#f4e3a1" style="-fx-font-family: 'Segoe UI'; -fx-font-weight: bold; -fx-font-size: 18px;" />
                     <Text fill="#e0d7c6" style="-fx-font-family: 'Segoe UI'; -fx-font-size: 14px;"
                           text="Enemies come in waves. Each wave gets progressively harder with stronger and more numerous enemies. Between waves, you have time to build or upgrade your defenses." 
                           wrappingWidth="640" />
                  </VBox>
                  
                  <!-- Strategy Tips Section -->
                  <VBox spacing="8" style="-fx-padding: 15; -fx-background-radius: 10;">
                     <Label text="STRATEGY TIPS" textFill="#f4e3a1" style="-fx-font-family: 'Segoe UI'; -fx-font-weight: bold; -fx-font-size: 18px;" />
                     <Text fill="#e0d7c6" style="-fx-font-family: 'Segoe UI'; -fx-font-size: 14px;"
                           text="• Place towers at choke points where enemies must pass.&#10;• Mix different tower types to counter various enemies.&#10;• Slow enemies with Ice Towers, then damage them with other towers.&#10;• Focus on upgrading key towers rather than building many basic towers.&#10;• Save some gold for emergency towers during tough waves." 
                           wrappingWidth="640" />
                  </VBox>
               </VBox>
            </content>
            <padding>
               <Insets bottom="20.0" />
            </padding>
         </ScrollPane>
      </center>
      
      <!-- Bottom bar with back button -->
      <bottom>
         <StackPane>
            <Rectangle width="800" height="80" 
                     style="-fx-fill: #5d7542; -fx-arc-width: 0; -fx-arc-height: 0;">
               <effect>
                  <DropShadow color="#00000080" height="10" radius="4.5" width="10" />
               </effect>
            </Rectangle>
            <Button fx:id="homeBtn" text="Back to Home" prefWidth="200" prefHeight="40"
                   onAction="#goToHomePage" />
         </StackPane>
      </bottom>
   </BorderPane>
</StackPane>